> Установка PHP в Windows

[[PHP 8. Наиболее полное руководство [2023].pdf#page=58&selection=43,0,43,23|PHP 8. Наиболее полное руководство [2023], page 58]]

> Установка PHP в macos

[[PHP 8. Наиболее полное руководство [2023].pdf#page=61&selection=49,0,49,21|PHP 8. Наиболее полное руководство [2023], page 61]]

> Чтобы установить PHP в Ubuntu, следует воспользоваться менеджером пакетов apt-get. Однако предварительно надо обновить сведения о репозиториях и текущие пакеты при помощи команд: $ sudo apt-get update $ sudo apt-get upgrade А затем приступить к установке: $ sudo apt-get install php После успешной установки в терминале становится доступной команда php

[[PHP 8. Наиболее полное руководство [2023].pdf#page=62&selection=119,0,142,3|PHP 8. Наиболее полное руководство [2023], page 62]]

> Если вы начинающий разработчик или PHP для вас вообще первый язык программиро- вания, следует сразу избавиться от иллюзии, что все программы работают без ошибок и просто надо кодировать так, чтобы их вовсе не возникало. При разработке программ у вас будет возникать много самых разных ошибок: синтаксических, логических, инте- грационных. То есть почти все время вы будете иметь дело с неработающей или плохо работающей программой и только в самом конце при должном упорстве получите пра- вильно работающую программу. К этому следует быть психологически готовым. Не злитесь на ошибки и не ругайте себя. Об этом редко пишут, но поиск и устранение ошибок в программном коде — это зачастую 80% работы разработчика. Работающие программы на вашем компьютере и работающие скрипты на страницах книги — это завершенные программы. В процессе их создания разработчики и авторы ошибались, разбирались, почему тот или иной скрипт не работает как задумывалось, эксперимен- тировали и много раз анализировали код. Поэтому возникающие ошибки следует вос- принимать как часть работы, вызов, головоломку, которую необходимо решить.

[[PHP 8. Наиболее полное руководство [2023].pdf#page=63&selection=63,0,76,74|PHP 8. Наиболее полное руководство [2023], page 63]]

> В предыдущем разделе PHP-скрипт был запущен в командной строке, однако веб- сайты обычно просматриваются в браузере. И для того чтобы браузер мог обратиться к веб-серверу, его потребуется запустить. Для этого PHP предоставляет специальный режим работы утилиты php. В папке со скриптом index.php следует выполнить команду: php -S localhost:4000 Команда запустит встроенный веб-сервер на порту 4000, и обратившись в браузере по адресу: http://localhost:4000/, вы сможете увидеть фразу Hello, world!. Если работа ведется из-под учетной записи системного администратора (Windows) или задействована команда sudo (macos или Linux), встроенный сервер можно запустить на стандартном 80-м порту: sudo php -S localhost:80 В этом случае в адресной строке браузера можно не указывать порт: http://localhost/. По умолчанию в качестве корневого каталога выступает текущая папка — именно в ней будет произведен поиск индексного файла index.php. Однако при помощи пара- метра -t можно указать произвольную папку: php -S localhost:4000 -t code/install Логи сервера выводятся непосредственно в консоль, в которой он был запущен. Если обратиться к серверу при помощи утилиты curl, то можно увидеть, что сервер само- стоятельно формирует все необходимые HTTP-заголовки: curl -I http://localhost:4000

[[PHP 8. Наиболее полное руководство [2023].pdf#page=64&selection=28,0,79,29|PHP 8. Наиболее полное руководство [2023], page 64]]

> В предыдущем разделе в качестве домена первого уровня использовался домен localhost, который является псевдонимом для IP-адреса 127.0.0.1. На локальном хосте соответствие псевдонима IP-адресу прописывается в файле hosts, который в UNIX- подобной операционной системе можно обнаружить по пути /etc/hosts, а в Windows — по пути C:\Windows\system32\drivers\etc\hosts. Как правило, в этом файле присутствуют как минимум две записи, сопоставляющие домену localhost локальный IP-адрес 127.0.0.1 в IPv4- и IPv6-форматах: 127.0.0.1 localhost ::1 localhost Именно наличие этих записей позволило нам запустить встроенный сервер с использо- ванием localhost в качестве домена. Для того чтобы настроить альтернативные псевдо- нимы, можно добавить дополнительные записи: 127.0.0.1 site.dev 127.0.0.1 www.site.dev 127.0.0.2 project.dev 127.0.0.2 www.project.dev IP-адреса, начинающиеся со 127, предназначены для локального использования, поэто- му для тестирования собственных проектов вы можете назначать любые адреса из это- го диапазона. После добавления новых псевдонимов в файл hosts их можно использовать совместно со встроенным сервером.

[[PHP 8. Наиболее полное руководство [2023].pdf#page=65&selection=20,0,86,23|PHP 8. Наиболее полное руководство [2023], page 65]]

> При использовании локальных IP-адресов из диапазона 127.X.X.X можно быть уверен- ным, что к серверу можно будет обратиться только с локальной машины. Однако если вам, наоборот, требуется продемонстрировать результат работы вашего приложения, в качестве хоста можно указать IP-адрес 0.0.0.0: php –S 0.0.0.0:4000 В этом случае можно получить доступ к веб-серверу, обратившись по IP-адресу хоста, где запущен сервер, — например: http://192.168.0.1:4000. Для того чтобы можно было обратиться к хосту по псевдониму, его придется либо прописать в hosts-файле каждого компьютера, с которого идет обращение к серверу, либо зарегистрировать доменное имя и связать его с IP-адресом компьютера, на котором сервер запущен.

[[PHP 8. Наиболее полное руководство [2023].pdf#page=65&selection=90,0,111,69|PHP 8. Наиболее полное руководство [2023], page 65]]

> PHP имеет огромное количество разнообразных настроек, которые сосредоточены в файле php.ini. Если вы только установили дистрибутив, то вместо файла php.ini сможе- те найти лишь два файла:  php.ini-production — рекомендованный набор параметров для рабочего сервера;  php.ini-development — рекомендованный набор параметров для рабочей станции раз- работчика. Для локальной разработки файл php.ini-development следует переименовать в php.ini. Не вдаваясь сейчас в содержимое конфигурационного файла php.ini, заметим, что сообщить о его местоположении встроенному серверу можно при помощи директивы -c. Для Windows команда может выглядеть следующим образом: php -S 127.0.0.1:4000 -c C:\php\php.ini Для UNIX-подобной операционной системы: php –S 127.0.0.1:4000 -c /etc/php.ini

[[PHP 8. Наиболее полное руководство [2023].pdf#page=66&selection=15,0,60,37|PHP 8. Наиболее полное руководство [2023], page 66]]

> До этого момента PHP-программы мы располагали в файлах с расширением php. На- пример, проверочный скрипт, выводящий фразу Hello, world! (см. листинг 3.1), рас- положен в файле index.php. Но это не единственный способ взаимодействия с интерпретатором — PHP можно запустить в интерактивном режиме с использованием параметра -a

[[PHP 8. Наиболее полное руководство [2023].pdf#page=66&selection=76,0,93,1|PHP 8. Наиболее полное руководство [2023], page 66]]

> Главным источником информации о PHP для всех разработчиков является официаль- ный сайт http://php.net. На его страницах можно обнаружить раздел документации, в том числе на русском языке. К сожалению, перевод документации на русский язык иногда не полон и отстает от английской версии. Мы не сможем осветить на страницах книги все возможности языка — нам просто не хватит для этого места, поэтому вам придется обращаться к документации PHP для того, чтобы воспользоваться всеми воз- можностями PHP.

[[PHP 8. Наиболее полное руководство [2023].pdf#page=67&selection=10,0,19,15|PHP 8. Наиболее полное руководство [2023], page 67]]

> Проверку стиля можно поручить утилите PHP_CodeSniffer, которая укажет на все места, где нарушен стиль кодирования. Более того, часть недоче- тов утилита позволяет поправить автоматически. Исходный код и инструкцию по установке этой утилиты вы можете найти на ее офици- альной странице: https://github.com/squizlabs/PHP_CodeSniffer. Перед установкой утилиты следует убедиться, что у вас уже установлен PHP. Далее следует скачать на свой компьютер файл phpcs.phar, например, воспользовавшись утилитой curl: $ curl -OL https://squizlabs.github.io/PHP_CodeSniffer/phpcs.phar

[[PHP 8. Наиболее полное руководство [2023].pdf#page=67&selection=52,23,77,63|PHP 8. Наиболее полное руководство [2023], page 67]]

> Запуск утилиты phpcs через интерпретатор PHP может быть не очень удобным. Быстрее было бы воспользоваться утилитой phpcs без предварительного вызова интерпретатора php. Если вы работаете в UNIX-подобной системе, ее можно установить при помощи менеджера пакетов:  в linux-дистрибутиве Ubuntu для этого выполните команду: $ sudo apt-get install -y php-codesniffer  в операционной системе macos лучше всего воспользоваться менеджером пакетов Homebrew, выполнив команду: $ brew install php-code-sniffer После этого можно использовать phpcs как обычную утилиту командной строки: $ phpcs -h Для проверки своего скрипта на соответствие стандартам кодирования утилите phpcs следует передать путь к папке с проверяемыми файлами или к одиночному PHP-файлу: $ phpcs index.ph

[[PHP 8. Наиболее полное руководство [2023].pdf#page=68&selection=25,0,73,14|PHP 8. Наиболее полное руководство [2023], page 68]]

> Docker — это технология операционной системы Linux, позволяющая организовать изолированные области, которые выглядят как независимые легковесные контейнеры. Это очень похоже на виртуальные машины, когда на компьютере можно запустить не- сколько контейнеров, внутри которых работают совершенно другие операционные сис- темы: на Linux вы можете запустить Windows, на Windows — Linux. Однако внутри Docker-контейнеров нет необходимости запускать операционную систему — это про- сто изолированные окружения в рамках текущей операционной системы. Такой подход позволяет значительно экономить оперативную память и вычислительные ресурсы по сравнению с виртуальными машинами и/или отдельными компьютерами с разными операционными системами.

[[PHP 8. Наиболее полное руководство [2023].pdf#page=69&selection=50,0,61,24|PHP 8. Наиболее полное руководство [2023], page 69]]

> Чтобы создать docker-том, мы воспользуемся параметром -v, которому передается строка, разделенная двоеточием: слева от двоеточия указывается путь до папки на ло- кальной машине, а справа — внутри docker-контейнера: $ docker run -p 4000:4000 -v "$(pwd)":/app php_test Здесь команда pwd — это UNIX-команда, возвращающая путь к текущей папке. В Win- dows вместо нее можно воспользоваться командой %cd% или указать абсолютный путь. Не останавливая работу команды docker run, создадим в текущей папке файл php.php следующего содержания (листинг 3.5). Листинг 3.5. Проверочный скрипт. Файл php.php <?php echo "Hello, php!"; ?> Теперь, если обратиться по адресу: http://localhost:4000/php.php, вы в браузере сможе- те увидеть фразу Hello, php!. Таким образом, нам удалось пробросить новый PHP-файл внутрь docker-контейнера без переборки docker-образа.

[[PHP 8. Наиболее полное руководство [2023].pdf#page=72&selection=14,0,60,53|PHP 8. Наиболее полное руководство [2023], page 72]]

