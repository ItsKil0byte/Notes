> Встречаются случаи, когда значения некоторых величин не меняются в течение работы программы. Это могут быть математические постоянные, пути к файлам, разнообраз- ные пароли и т. д. Как раз для этих целей в PHP и предусмотрена такая конструкция, как константа. Константы — это еще один элемент языка программирования PHP. У них, так же как и у переменных, имеется имя, по которому к ним можно обращаться, и значение, кото- рое в них хранится. Константа отличается от переменной тем, что, во-первых, ей нельзя присвоить значе- ние больше одного раза, во-вторых, значение константы не может изменяться во время выполнения скрипта, и в третьих, ее имя не предваряется знаком $. Кроме того, кон- станты не могут принимать неопределенное значение null.

[[PHP 8. Наиболее полное руководство [2023].pdf#page=154&selection=12,0,34,1|PHP 8. Наиболее полное руководство [2023], page 154]]

> Мы уже пользовались ранее константами PHP_INT_MAX и PHP_INT_SIZE, которые опреде- ляют максимальный размер и количество байтов, отводимых под целое число. Далее приведено несколько предопределенных констант. Обратите внимание, что большинство из них предваряются и завершаются двумя символами подчеркивания:  __FILE__ Хранит имя файла, в котором расположен запущенный в настоящий момент код.  __LINE__ Содержит текущий номер строки, которую обрабатывает в текущий момент интер- претатор. Эта своеобразная «константа» каждый раз меняется по ходу исполнения программы (впрочем, константа __FILE__ также меняется, если мы передаем управ- ление в другой файл).  __FUNCTION__ Имя текущей функции.  __CLASS__ Имя текущего класса.  PHP_VERSION Версия интерпретатора PHP.  PHP_OS Имя операционной системы, под управлением которой работает PHP.  PHP_EOL Символ конца строки, используемый на текущей платформе: \n для UNIX-подобных операционных систем и \r\n для Windows.  true Эта константа нам уже знакома и содержит значение «истина».  false Содержит значение «ложь».  null Содержит значение null. ПРИМЕЧАНИЕ Для констант true, false и null допускается написание в прописном регистре: TRUE, FALSE и NULL. Однако стандарт кодирования требует, чтобы они записывались в строчном регистре (маленькими буквами).

[[PHP 8. Наиболее полное руководство [2023].pdf#page=155&selection=4,0,134,21|PHP 8. Наиболее полное руководство [2023], page 155]]

Привести на страницах книги полный список предопределенных констант не представ- ляется возможным. Кроме того, их набор зависит от подключенных в тот или иной момент времени расширений. Вы можете самостоятельно получить полный список доступных в текущий момент констант при помощи функции get_defined_constants(), которая имеет следующий синтаксис: get_defined_constants(bool $categorize = false): array 

> Вы можете определить и собственные, новые константы. Делается это при помощи конструкции define(), которая имеет следующий синтаксис: define(string $constant_name, mixed $value): bool Конструкция define() определяет новую константу с именем, переданным в параметре $constant_name, и значением из параметра $value. ПРИМЕЧАНИЕ В документации можно встретить третий параметр конструкции define(), который отвечает за создание нечувствительных к регистру констант. Однако, начиная с PHP 8.0, такие кон- станты признаны устаревшими, и в будущих версиях PHP этот параметр define() будет исключен. Созданная константа не может быть уничтожена или переопределена. В качестве зна- чения константы может выступать логическое (boolean), целочисленное (integer), вещественное (float), строковое (string) значения или массив (array)

[[PHP 8. Наиболее полное руководство [2023].pdf#page=156&selection=33,0,94,1|PHP 8. Наиболее полное руководство [2023], page 156]]

> Начиная с версии PHP 8.1, в качестве значения константы могут выступать объекты

[[PHP 8. Наиболее полное руководство [2023].pdf#page=156&selection=131,0,131,79|PHP 8. Наиболее полное руководство [2023], page 156]]

> Для проверки существования константы имеется отдельная функция defined() со сле- дующим синтаксисом: defined(string $constant_name): bool В качестве единственного параметра функция принимает строку с именем константы $constant_name и возвращает true, если константа существует, иначе возвращается false.

[[PHP 8. Наиболее полное руководство [2023].pdf#page=157&selection=60,0,79,1|PHP 8. Наиболее полное руководство [2023], page 157]]

Иногда возникает ситуация, когда имя константы формируется динамически в ходе выполнения программы, поэтому нельзя заранее предугадать ее имя и записать в теле скрипта. В этом случае для обращения к такой константе может быть полезна функция constant(): constant(string $name): mixed 158 Часть II. Основы языка PHP Функция возвращает значение константы с именем $name. В случае, если константа с таким именем не обнаружена, возникает ошибка. В листинге 7.8 обе строки, выводящие значение константы VALUE при помощи прямого обращения и функции constant(), эквиваленты.

> В современных PHP-приложениях для решения этой проблемы применяют несколько приемов. Во-первых, стараются использовать одну точку входа, расположенную в кор- не проекта. При этом вместо указания абсолютного пути используют предопределен- ную константу __DIR__, сообщающую текущий каталог скрипта: require_once __DIR__ . 'include/classes.php'; require_once __DIR___ . 'unils/index.php'; ПРИМЕЧАНИЕ Оператор «точка» (.) используется для объединения или конкатенации строк. Более под- робно этот оператор рассматривается в главе 8.

[[PHP 8. Наиболее полное руководство [2023].pdf#page=159&selection=108,0,131,1|PHP 8. Наиболее полное руководство [2023], page 159]]

> Классы также могут содержать константы, которые определяются при помощи ключе- вого слова const.

[[PHP 8. Наиболее полное руководство [2023].pdf#page=160&selection=35,0,39,1|PHP 8. Наиболее полное руководство [2023], page 160]]

> Точно так же, как и в случае со статическими членами классов, к константам нельзя обращаться при помощи оператора ->. Для обращения к ним используется оператор разрешения области видимости ::. Существование констант класса может быть проверено при помощи уже упомянутой ранее функции defined(), которая возвращает true, если константа существует, и false — в противном случае

[[PHP 8. Наиболее полное руководство [2023].pdf#page=160&selection=73,0,93,20|PHP 8. Наиболее полное руководство [2023], page 160]]

> Доступ к константам класса, так же как и к переменным, можно ограничивать при по- мощи спецификаторов доступа public, private и protected. По умолчанию константы открыты (public) и, как следствие, доступны за пределами класса (см. листинг 7.11). Однако можно создать закрытую (private) константу — например, для использования исключительно в методах класса

[[PHP 8. Наиболее полное руководство [2023].pdf#page=161&selection=13,0,31,30|PHP 8. Наиболее полное руководство [2023], page 161]]

